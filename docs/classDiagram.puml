@startuml Data Generator
skinparam classAttributeIconSize 0

class Server{
+ run(): void
- constructRequest(): void
- processRequest(): void
- handleRequest(): void
}

class RequestProcessor{
    - formatter: formatter
    - externalAPI: ExternalAPI
    + initialize(): RequestProcessor
    + Process(): String
}

class ExternalAPI{
    - dataStructure: Map
    - token: String
    - apiKey: String
    - url: String
    + initialize(options: Map): ExternalAPI
    + getDataStructure(): Map
    + getStationboard(station: String, date: DateTime): String
    + getConnections(from: String, to: String, date: DateTime): String
    + getStations(query: String): String
    - authenticate(): void
}

class SearchCH{
    + getStationboard(options: Map)): String
    + getConnections(option: Map): String
}

interface formatter{
    - DestinationDataStructure: Map
    - originDataStructure: Map
    + initialize(originDataStructure: Map = {}): formatter
    + format(data: Map): String
}

class DataStructureUtilities{
    + {static} remapJSON(data: String, originStructure: Map, DestinationStructure: Map): String
}

class DeutschebahnCOM {
}

class SheneoIO {
}

class SncfCOM{
}

class JSONformatter{
}

class PDFformatter{
    + format(data: Map): String
}

class Timetable {
  - table_data: Array
  + initialize(): void
  + document(): Prawn::Document
  + draw_logo(path: String): void
  + headers=(headers: Array): void
  + draw_table(options: Map): void
  + draw_heading(date: DateTime): void
  + save(filename: String): void
  + stop=(stop: Map): void
}


class Dotenv{
}

'Singleton
class Config{
    'available regions will have one or more API classes associated with it
    + regionAPI: Map
    + instance(): Config
    + load(): void
}

RequestProcessor -right-> formatter
formatter <|.. JSONformatter
formatter <|.. PDFformatter

formatter -right->DataStructureUtilities

PDFformatter -left-> Timetable


SearchCH .up.|> ExternalAPI
DeutschebahnCOM .up.|> ExternalAPI
SheneoIO .up.|> ExternalAPI
SncfCOM .up.|> ExternalAPI

Server -up-> RequestProcessor
RequestProcessor -left-> ExternalAPI

'Dotenv file not a class
ExternalAPI -left-> Dotenv

'Main will be just a file, maybe called index, doesn't really matter
main -up-> Server
main -right-> Config

@enduml